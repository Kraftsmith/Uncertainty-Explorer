/* Global box-sizing reset for more predictable layouts */
*,
*::before,
*::after {
    box-sizing: border-box;
}

:root {
    --primary-color: #2c3e50; /* Base text and dark elements */
    --primary-dark-color: #1a237e; /* Darker shade for titles or accents */
    --secondary-color: #3498db; /* Main accent color for buttons, links */
    --secondary-dark-color: #2980b9; /* Darker accent for hover states */
    --success-color: #27ae60;
    --danger-color: #e74c3c;
    --danger-dark-color: #c0392b;
    --light-gray: #f4f7f9; /* Page background */
    --medium-gray: #e0e0e0; /* Borders, dividers */
    --dark-gray: #555555; /* Secondary text */
    --white: #ffffff; /* Section backgrounds, text on dark */

    /* Stacey Matrix Colors (can be used by others if names are generic) */
    --simple-stacey-color: #AFF2AF;
    --complicated-stacey-color: #FFB854;
    --complex-stacey-color: #88B2CB;
    --chaotic-stacey-color: #A409B2;
    --score-color: #B75C63;      /* Stacey score point, Cynefin highlight */

    /* Cynefin Framework Colors */
    --complex-cynefin-color: #53ABBF;
    --complicated-cynefin-color: #002A53;
    --chaotic-cynefin-color: #0F7A66;
    --clear-cynefin-color: #0E5A30;
    --disorder-cynefin-color: #8A5F00;
    --highlight-color: var(--score-color); /* Cynefin quadrant highlight */
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.6;
    color: var(--primary-color); /* Default text color, using a variable */
    margin: 0; 
    background-color: #f7f9f8;
}
 
h1, h2, h3, h4 {
    color: var(--primary-dark-color); /* Darker titles */
    margin-top: 0;
}

/* Specific color for h3 elements */
h3 {
    color: var(--secondary-color); /* #3498db */
}

/* Navigation Styles */
.left-nav {
    width: 220px;
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    background-color: var(--primary-color);
    padding-top: 50px; /* Make space for collapse button if it's at the top */
    padding-right: 20px;
    padding-bottom: 20px;
    padding-left: 20px;
    transform: translateX(0); /* Visible by default on larger screens */
    z-index: 1000; /* Ensure nav is on top */
}

.left-nav ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    overflow-y: auto; /* Allow scrolling for links if nav is short */
}

.left-nav li a {
    display: block;
    padding: 12px 15px;
    color: var(--white);
    text-decoration: none;
    border-radius: 4px;
    margin-bottom: 8px; /* Spacing between items */
    transition: background-color 0.2s ease, color 0.2s ease;
    font-weight: 500;
    display: flex; /* For aligning icon and text */
    align-items: center;
}

.nav-link-icon {
    margin-right: 10px;
    display: inline-block;
    transition: margin 0.3s ease-in-out;
}
.nav-link-text {
    display: inline-block;
    transition: opacity 0.3s ease-in-out, max-width 0.3s ease-in-out;
    white-space: nowrap;
    overflow: hidden;
    max-width: 200px; /* Adjust as needed */
}

.left-nav li a:hover {
    background-color: var(--secondary-dark-color); /* Darker accent on hover */
    color: var(--white);
}

.left-nav li a.active {
    background-color: var(--secondary-color); /* Main accent for active */
    color: var(--white);
    font-weight: 700;
}

.main-content-with-nav {
    margin-left: 220px; /* Same as nav width */
    padding: 24px;
    /* width: calc(100% - 220px); // Width is implicitly 100% minus margin */
    transition: margin-left 0.3s ease-in-out;
}

/* Desktop Navigation Collapse Button */
.desktop-nav-collapse-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--secondary-dark-color);
    color: var(--white);
    border: none;
    padding: 5px 10px;
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 4px;
    z-index: 1001; /* Above nav links */
}

/* Hamburger Toggle Button */
.nav-toggle-btn {
    display: none; /* Hidden by default, shown on mobile */
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 1005; /* Above overlay, potentially above nav when closed */
    background: var(--secondary-color);
    color: var(--white);
    border: none;
    padding: 8px 12px;
    font-size: 1.5em;
    cursor: pointer;
    border-radius: 4px;
}

/* Overlay for mobile navigation */
.nav-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999; /* Below the nav, above main content */
}

.section {
    background-color: var(--white);
    border-radius: 4px;
    padding: 16px;
    margin-bottom: 8px; /* 8px based */
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.section-title {
      padding-bottom: 4px;
    margin-bottom: 4px; /* 8px based */
    font-size: 1.2em; /* Consistent title size */
}

.question-group {
    margin-bottom: 8px; /* 8px based */
}

/* Standardized Question Container Layout */
.question-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    background-color: #f9f9f9; /* Light background for each question item */
    box-sizing: border-box;
    /* border-left: 3px solid var(--secondary-color); /* Optional: can be added if a common left border is desired */
}

.question-container label {
    padding: 8px; /* Add padding here instead of on .question-container */
    flex: 0 0 65%; /* This is a ratio, not direct spacing */
    margin-right: 16px;
    font-weight: 500;
    line-height: 1.4;
}

.question-container .slider-wrapper {
    padding: 8px; /* Add padding here for consistency */
    flex: 0 0 30%;
    display: flex;
    align-items: center;
}

/* Standardized Slider Styles (from Cynefin.html) */
.slider {
    flex-grow: 1; /* Allow slider to take available space in its wrapper */
    /* width: 30%; */ /* Replaced by flex-grow */
    cursor: pointer;
    -webkit-appearance: none;
    appearance: none;
    height: 8px;
    background: #ddd; /* Neutral background for slider track */
    outline: none;
    opacity: 0.7;
    transition: opacity .2s;
    border-radius: 4px;
}
.slider:hover {
    opacity: 1;
}
.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px; /* 8px based */
    height: 24px; /* 8px based */
    background: var(--secondary-color); /* Thumb color */
    cursor: pointer;
    border-radius: 50%;
}
.slider::-moz-range-thumb {
    width: 24px; /* 8px based */
    height: 24px; /* 8px based */
    background: var(--secondary-color); /* Thumb color */
    cursor: pointer;
    border-radius: 50%;
    border: none;
}

.slider-value {
    min-width: 32px; /* 8px based, ensures enough space for "10.0" */
    text-align: right;
    font-weight: bold;
    color: var(--secondary-dark-color);
    margin-left: 8px; /* 8px based */
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.8em;
    color: var(--dark-gray);
    margin-top: 8px; /* 8px based */
}

button {
    padding: 8px 16px;
    background-color: var(--secondary-color);
    color: var(--white);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1.05em;
    font-weight: 500;
    transition: background-color 0.2s ease, transform 0.1s ease;
}
button:hover {
    background-color: var(--secondary-dark-color);
    transform: translateY(-1px);
}
button:active {
    transform: translateY(0px);
}

.chart-container { 
    position: relative;
    height: 400px; /* Default height for larger screens */
    width: 100%;
    margin: 16px auto; /* Updated: 24px > 8px, so becomes 16px */
}

.legend { 
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
    margin-bottom: 8px; /* 8px based */
    padding: 8px; /* 8px based */
    background-color: #f9f9f9; /* Light background for legend area */
    border-radius: 6px;
}

.legend-item { 
    display: flex;
    align-items: center; 
    padding: 8px; /* 8px based */
    background-color: var(--white);
    font-size: 0.9em;
}

.legend-color { 
    width: 16px; /* 8px based */
    height: 16px; /* 8px based */
    margin-right: 8px;
    border-radius: 3px;
    border: 1px solid var(--medium-gray); /* Slight border for legend swatches */
}

.score-display { 
    font-size: 1.1em;
}
.score-display strong {
    color: var(--dark-gray);
}

.summary-section { 
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: space-around;
    margin-top: 16px;
    margin-bottom: 8px; /* 8px based */
}

.summary-card { 
    background-color: var(--white);
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--medium-gray);
    flex: 1;
    min-width: 200px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.03);
}
.summary-card h4 {
    margin-top: 0;
    color: var(--primary-dark-color); /* Consistent with other titles */
}

@media (max-width: 768px) {
    .section {
        /* padding: 16px; */ /* Already 16px, no change needed from previous */
        padding: 16px; /* 8px based */
    }
    
    .chart-container { 
        height: 350px; 
    }

    .summary-section {
        flex-direction: column; /* Stack summary cards */
    }

    /* Responsive stacking for questions */
    .question-container {
        flex-direction: column;
        align-items: flex-start;
    }
    .question-container label {
        margin-bottom: 8px; /* 8px based */
        flex-basis: auto;
    }
    .question-container .slider-wrapper {
        width: 100%;
        flex-basis: auto;
    }

    /* Responsive Navigation: Collapsible */
    .nav-toggle-btn {
        display: block; /* Show hamburger on mobile */
    }

    .desktop-nav-collapse-btn {
        display: none; /* Hide desktop collapse button on mobile */
    }

    .left-nav {
        transform: translateX(-100%); /* Hidden off-screen by default */
        transition: transform 0.3s ease-in-out;
        z-index: 1001; /* Higher than overlay */
        box-shadow: 2px 0 5px rgba(0,0,0,0.2); /* Add shadow when open */
    }

    .left-nav.open {
        transform: translateX(0); /* Slide in when open */
    }

    .main-content-with-nav {
        margin-left: 0;
        width: 100%;
    }

    .nav-overlay.active {
        display: block;
    }
}

/* Styles for Desktop Collapsed Navigation */
body.desktop-nav-collapsed .left-nav {
    width: 70px; /* Collapsed width */
    padding-left: 10px;
    padding-right: 10px;
}

body.desktop-nav-collapsed .left-nav .nav-link-text {
    opacity: 0;
    max-width: 0;
}
body.desktop-nav-collapsed .left-nav .nav-link-icon {
    margin-right: 0; /* Remove margin when text is hidden */
}
body.desktop-nav-collapsed .main-content-with-nav {
    margin-left: 70px; /* Adjust to collapsed nav width */
}
/* Styles moved from stacey.html */
.stacey-progress-tracker {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 16px; /* Updated: 30px > 8px, so becomes 16px */
    padding: 10px 0; /* Consider 8px or 16px */
    border-radius: 6px; /* Consider 2px or 4px */
}
.step {
    padding: 10px 20px; /* Consider 8px 16px or 16px 24px */
    margin: 0 8px; /* Updated: 5px is between 4-8, so becomes 8px */
    border: 2px solid var(--medium-gray);
    border-radius: 25px; /* Pill shape - this is a distinct style */
    cursor: pointer;
    font-weight: 500;
    color: var(--dark-gray);
    background-color: var(--white);
    transition: all 0.3s ease;
    white-space: nowrap; /* Prevent text wrapping inside steps */
}
.step.active {
    background-color: var(--secondary-color);
    color: var(--white);
    border-color: var(--secondary-dark-color);
}
.step:hover:not(.active) {
    background-color: #e9ecef; 
    border-color: var(--secondary-color);
}
.step-connector {
    width: 30px; 
    height: 2px;
    background-color: var(--medium-gray);
}
.question-panel { /* Specific to Stacey's tabbed interface */
    display: none; 
}
.question-panel.active { /* Specific to Stacey's tabbed interface */
    display: block; 
}

/* Stacey Matrix Legend Colors */
.simple-color { background-color: var(--simple-stacey-color); }
.complicated-color { background-color: var(--complicated-stacey-color); }
.complex-color { background-color: var(--complex-stacey-color); }
.chaotic-color { background-color: var(--chaotic-stacey-color); }
.score-color { background-color: var(--score-color); } /* Ensures legend item uses the variable */

.stacey-chart-container { /* Specific for Stacey chart */
    height: 450px; /* Default height for larger screens */
    min-height: 400x; /* Ensure it doesn't collapse too much */
}


/* Styles moved from Cynefin.html */
.group-title { /* Cynefin specific title for question groups */
    font-size: 1.4em;
    font-weight: 600;
    margin-bottom: 16px; /* 8px based */
    color: var(--secondary-color); 
}

.cynefin-chart-container { /* Renamed from .chart-container in Cynefin to avoid conflict if summary uses a generic one */
    height: 480px; 
    margin: 8px auto; /* 8px based */
    border: 1px solid #d1d9e0;
    border-radius: 8px; /* Consider 2px or 4px */
    overflow: hidden;
    position: relative; 
}

.score-box { /* Cynefin specific score box */
    padding: 16px; /* 8px based */
    border-radius: 8px; /* Consider 2px or 4px */
    background-color: var(--light-gray, #f9f9f9);
    text-align: center;
    flex: 1; 
    min-width: 200px; 
    border: 1px solid #e7e7e7;
    box-shadow: 0 2px 4px rgba(0,0,0,0.03);
}
.score-box div:first-child {
    font-weight: 600;
    margin-bottom: 8px;
    color: #4a4a4a;
    font-size: 0.95em;
}
.score-value { /* Cynefin specific styling for the large score number */
    font-size: 1.75em;
    font-weight: 700;
    margin-top: 8px;
    color: var(--secondary-color);
}

.domain-label, .domain-approach { /* Cynefin chart text */
    position: absolute;
    text-align: center; 
    pointer-events: none;
    z-index: 10; 
    color: var(--white, #FFFFFF);
    text-shadow: 0 1px 3px rgba(0,0,0,0.6);
    padding: 8px; /* 8px based */
    width: 85%; 
    box-sizing: border-box;
    left: 50%; 
    transform: translateX(-50%); 
}
.domain-label { 
    font-weight: 500;
    font-size: 0.9em;
}
.domain-approach { 
    font-size: 0.85em;
    line-height: 1.4;
    font-style: italic;
}

.quadrant { /* Cynefin chart quadrant */
    position: absolute;
    opacity: 0.75;
    border: 2px solid transparent;
    box-sizing: border-box;
}
.quadrant-name { /* Cynefin chart quadrant name */
    font-weight: 700;
    font-size: 1.6em; 
    color: var(--white, #FFFFFF); 
    text-transform: uppercase; 
    text-shadow: 0 1px 3px rgba(0,0,0,0.6);
    text-align: center;
    width: 90%;
    position: absolute;
    top: 25%; 
    left: 50%;
    transform: translate(-50%, -50%); 
}
.quadrant.highlighted { /* Cynefin chart highlighted quadrant */
    border-color: var(--highlight-color, #e74c3c);
    border-width: 4px;
    opacity: 1; 
    z-index: 2;
}
/* Cynefin quadrant specific positions and colors */
#complex { background-color: var(--complex-cynefin-color, #0d4d78); top: 0; left: 0; width: 50%; height: 50%; }
#complicated { background-color: var(--complicated-cynefin-color, #08602e); top: 0; right: 0; width: 50%; height: 50%; }
#chaotic { background-color: var(--chaotic-cynefin-color, #4d130d); bottom: 0; left: 0; width: 50%; height: 50%; }
#clear { background-color: var(--clear-cynefin-color, #008ac0); bottom: 0; right: 0; width: 50%; height: 50%; }
#disorder { background-color: var(--disorder-cynefin-color, #95a5a6); top: 50%; left: 50%; width: 35%; height: 35%; transform: translate(-50%, -50%); display: none; border-radius: 50%; opacity: 0.9; z-index: 5; padding-top: 0; }
#disorder .quadrant-name { top: 50%; }

/* Styles moved from summary.html */
.area-display { /* Stacey area display on summary */
    padding: 8px; /* 8px based */
    border-radius: 4px; /* Consider 2px */
    font-weight: bold;
    margin-top: 8px; /* Added for spacing within card */
    color: #fff; /* Default text color for areas, can be overridden */
    text-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* Readability */
}
/* Stacey Area display colors on summary */
.simple-area { background-color: var(--simple-stacey-color); }
.complicated-area { background-color: var(--complicated-stacey-color); }
.complex-area { background-color: var(--complex-stacey-color); }
.chaotic-area { background-color: var(--chaotic-stacey-color); }
.default-area-bg { /* Default background for domain displays if no specific color is set */
    background-color: var(--dark-gray); /* Or another neutral color */
}

.domain-info { /* Cynefin domain info on summary */
    margin-top: 16px; /* 8px based */
    padding: 16px; /* 8px based */
    border-radius: 8px; /* Consider 2px or 4px */
    background-color: var(--light-gray, #f9f9f9);
    border: 1px solid #e0e0e0;
}
.domain-info h3 { /* Already styled by common h3, but if specific needed */
    margin-top: 0;
    font-size: 1.5em; /* Specific size for this context */
    margin-bottom: 16px; /* 8px based */
}
.domain-info h4 { /* For "Delivery Framework" heading */
    margin-top: 16px; /* 8px based */
    margin-bottom: 8px; /* 8px based */
    color: var(--secondary-color); 
    border-bottom: 1px solid #eee; /* Consider var(--medium-gray) */
    padding-bottom: 8px; /* 8px based */
}
.domain-info ul {
    padding-left: 24px; /* 8px based */
    list-style-type: disc; 
}
.domain-info li {
    margin-bottom: 8px;
    line-height: 1.5;
}
.export-buttons {
    display: flex;
    gap: 8px; /* 8px based */
    justify-content: center;
    margin: 16px 0; /* 8px based */
}
.email-form {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 16px; /* 8px based */
    border-radius: 8px; /* Consider 2px or 4px */
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
}
.email-form input, .email-form textarea {
    width: calc(100% - 16px); /* Account for padding */
    padding: 8px;
    margin: 8px 0; /* 8px based */
    border: 1px solid #ddd;
    border-radius: 4px; /* Consider 2px */
    box-sizing: border-box;
}
.email-form button { /* Buttons within email form, might differ from global */
    padding: 8px 16px; /* 8px based */
    margin: 8px 0 0 8px; /* 8px based, added top margin */
}
.overlay { /* For email form modal */
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 999;
}